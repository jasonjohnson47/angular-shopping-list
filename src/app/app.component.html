<main>
  <h1 class="text-3xl font-light text-cyan-700 text-center mb-4">My Shopping List</h1>
  <section class="bg-slate-100 border border-solid border-slate-200 rounded p-5 mb-8">
      <h2 class="text-xl font-light text-center mb-4">Add Items to Your List</h2>
      <form ngNativeValidate (ngSubmit)="addItem(itemInput.value); itemInput.value = ''">
        <sl-input #itemInput class="item-input mb-4" label="Item" placeholder="What do you need to buy?" size="medium" pill required="true" autocapitalize="off" (sl-input)="getAutocompleteSuggestions(itemInput.value)">
          <!--<sl-icon-button slot="suffix" name="plus-circle-fill" label="Add Item to List" class="add-icon-button pr-2"></sl-icon-button>-->
          <sl-button type="submit" slot="suffix" variant="text" class="add-icon-button pr-2">
            <sl-icon name="plus-circle-fill" label="Add Item to List"></sl-icon>
          </sl-button>
        </sl-input>
        <sl-menu *ngIf="itemInput.value && filteredAutoCompleteShoppingItems.length" (sl-select)="autoCompleteSelectAddItem($event); itemInput.value = ''">
          <div *ngFor="let group of filteredAutoCompleteShoppingItems">
            <sl-menu-label>{{ group.category }}</sl-menu-label>
            <ng-container *ngFor="let item of group.items">
              <sl-menu-item value="{{ item }}" tabindex="0">{{ item }}</sl-menu-item>
            </ng-container>
          </div>
        </sl-menu>
        <sl-dropdown style="width:100%;">
          <sl-button slot="trigger" caret pill outline variant="primary" style="width: 100%;">Choose Items to Add</sl-button>
          <sl-menu (sl-select)="autoCompleteSelectAddItem($event); itemInput.value = ''">
            <div *ngFor="let group of allShoppingItems">
              <sl-menu-label>{{ group.category }}</sl-menu-label>
              <ng-container *ngFor="let item of group.items">
                <sl-menu-item value="{{ item }}" tabindex="0">{{ item }}</sl-menu-item>
              </ng-container>
            </div>
          </sl-menu>
        </sl-dropdown>
      </form>
  </section>
  <sl-radio-group class="mb-8 flex justify-center" label="Select an option">
    <sl-radio-button name="list-filter-all" value="all" [checked]="filteredListShoppingItems == 'all'" (click)="filteredListShoppingItems = 'all'">All</sl-radio-button>
    <sl-radio-button name="list-filter-need" value="need" [checked]="filteredListShoppingItems == 'need'" (click)="filteredListShoppingItems = 'need'">Need</sl-radio-button>
    <sl-radio-button name="list-filter-got" value="got" [checked]="filteredListShoppingItems == 'got'" (click)="filteredListShoppingItems = 'got'">Got</sl-radio-button>
  </sl-radio-group>
  <section class="mb-8">
      <h2 *ngIf="items.length" class="text-xl font-light mb-4">Things You Need</h2>
      <ul cdkDropList (cdkDropListDropped)="drop($event)" class="shopping-list-items">
          <li
            *ngFor="let item of listItems; last as isLast"
            [class.border-b]="isLast"
            class="border-t flex justify-between items-center py-1"
            cdkDrag
          >
            <div class="list-item-placeholder" *cdkDragPlaceholder></div>
            <sl-checkbox [checked]="item.completed" #listItemCheckbox (sl-change)="onCheckboxChange(item.id, listItemCheckbox.checked)" class="-mt-1">{{ item.label }}</sl-checkbox>
            <div>
              <sl-icon name="grip-horizontal" cdkDragHandle></sl-icon>
              <sl-icon-button name="x" label="Delete" class="delete-icon-button" (click)="removeItem(item.id)"></sl-icon-button>
            </div>
          </li>
      </ul>
  </section>
</main>
